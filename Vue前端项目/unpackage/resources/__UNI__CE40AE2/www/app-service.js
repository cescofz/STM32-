if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((n=>t.resolve(e()).then((()=>n))),(n=>t.resolve(e()).then((()=>{throw n}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e,t,...n){uni.__log__?uni.__log__(e,t,...n):console[e].apply(console,[...n,t])}__definePage("pages/index/index",((e,t)=>{const n=e.__vccOpts||e;for(const[a,r]of t)n[a]=r;return n})({data:()=>({accessToken:"",temperature:null,humidity:null,smoke:null}),onLoad(){this.getToken().then((e=>{this.accessToken=e.AccessToken,t("log","at pages/index/index.vue:34","获取Token成功:",this.accessToken),this.startDataPolling()})).catch((e=>{t("error","at pages/index/index.vue:39","获取Token失败:",e),this.temperature="认证失败",this.humidity="认证失败"}))},onUnload(){this.pollingTimer&&clearInterval(this.pollingTimer)},methods:{getToken:()=>new Promise(((e,t)=>{uni.request({url:"http://api.nlecloud.com/Users/Login",method:"POST",data:{Account:"15511896620",Password:"123456"},success:n=>{n.data&&n.data.ResultObj&&n.data.ResultObj.AccessToken?e({AccessToken:n.data.ResultObj.AccessToken}):t(new Error("获取Token失败：响应格式不正确"))},fail:e=>{t(e)}})})),fuc_req(){uni.request({url:"http://api.nlecloud.com/devices/1331745/sensors/temperature",method:"GET",header:{AccessToken:this.accessToken},success:e=>{t("log","at pages/index/index.vue:85",e.data),this.temperature=e.data.ResultObj.Value}}),uni.request({url:"http://api.nlecloud.com/devices/1331745/sensors/humidity",method:"GET",header:{AccessToken:this.accessToken},success:e=>{t("log","at pages/index/index.vue:96",e.data),this.humidity=e.data.ResultObj.Value}}),uni.request({url:"http://api.nlecloud.com/devices/1331745/sensors/smoke",method:"GET",header:{AccessToken:this.accessToken},success:e=>{t("log","at pages/index/index.vue:107",e.data),this.smoke=e.data.ResultObj.Value}})},startDataPolling(){this.fuc_req(),this.pollingTimer=setInterval((()=>{this.fuc_req()}),2e3)}}},[["render",function(t,n,a,r,s,o){return e.openBlock(),e.createElementBlock("div",{class:"page"},[e.createElementVNode("div",{class:"Author"},[e.createElementVNode("h1",null,"作者:石家庄市电子信息学校 24-13班李佳澍")]),e.createElementVNode("div",{class:"temp"},[e.createElementVNode("p",null,"当前温度: "+e.toDisplayString(s.temperature||"加载中...")+"℃",1)]),e.createElementVNode("div",{class:"hum"},[e.createElementVNode("p",null,"当前湿度: "+e.toDisplayString(s.humidity||"加载中...")+"%",1)]),e.createElementVNode("div",{class:"smoke"},[e.createElementVNode("p",null,"烟雾:"+e.toDisplayString(1===s.smoke?"有烟":0===s.smoke?"无烟":"加载中..."),1)])])}],["__scopeId","data-v-9363e39f"]]));const n={onLaunch:function(){t("log","at App.vue:4","App Launch")},onShow:function(){t("log","at App.vue:7","App Show")},onHide:function(){t("log","at App.vue:10","App Hide")}};const{app:a,Vuex:r,Pinia:s}={app:e.createVueApp(n)};uni.Vuex=r,uni.Pinia=s,a.provide("__globalStyles",__uniConfig.styles),a._component.mpType="app",a._component.render=()=>{},a.mount("#app")}(Vue);
